@{
    ViewData["Title"] = "Login";
    Layout = "~/Views/Shared/_UserLayout.cshtml";
}

<section class="sign-in">
    <div class="container">
        <div class="signin-content">
            <div class="signin-image">
                <figure><img src="~/images/signin-image.jpg" alt="sign up image"></figure>
                <a asp-area="" asp-controller="User" asp-action="Register" class="signup-image-link">Create an account</a>
            </div>

            <div class="signin-form">
                <h2 class="form-title">Sign up</h2>

                <form method="POST" class="register-form" id="login-form" action="/User/HandleLogin">
                    <div class="form-group">
                        <label for="email"><i class="zmdi zmdi-account material-icons-name"></i></label>
                        <input type="text" name="email" id="email" placeholder="Your Email" required />
                    </div>
                    <div class="form-group">
                        <label for="your_pass"><i class="zmdi zmdi-lock"></i></label>
                        <input type="password" name="pass" id="your_pass" placeholder="Password" required />

                    </div>

                    <div class="form-group form-button">
                        <input type="submit" name="signin" id="signin" class="form-submit" value="Log in" />
                    </div>
                </form>

                <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

                <script>
                    document.addEventListener("DOMContentLoaded", function () {
                    @if (TempData["ErrorMessage"] != null)
                    {
                        <text>
                                    Swal.fire({
                                        icon: 'error',
                                        title: 'Error!',
                                        text: "@TempData["ErrorMessage"]",
                                        confirmButtonText: 'Try Again'
                                    });
                        </text>
                    }

                    @if (TempData["SuccessfulMessage"] != null)
                    {
                        <text>
                                    Swal.fire({
                                        icon: 'success',
                                        title: 'Success!',
                                        text: "@TempData["SuccessfulMessage"]",
                                        confirmButtonText: 'Login'
                                    }).then((result) => {
                                        if (result.isConfirmed) {
                                            window.location.href = '@Url.Action("Login", "User")'; // ✅ ينقل المستخدم إلى صفحة تسجيل الدخول بعد الضغط على OK
                                        }
                                    });
                        </text>
                    }
                    });
                </script>


                <div class="social-login">
                    <span class="social-label">Or login with</span>
                    <ul class="socials">
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-facebook"></i></a></li>
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-twitter"></i></a></li>
                        <li><a href="#"><i class="display-flex-center zmdi zmdi-google"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>
</section>
